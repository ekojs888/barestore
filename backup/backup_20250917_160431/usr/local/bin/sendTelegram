#!/bin/bash

CONFIG_FILE="/etc/sendTelegram.conf"

# pastikan config ada
if [ ! -f "$CONFIG_FILE" ]; then
  echo "Config file $CONFIG_FILE tidak ditemukan."
  exit 1
fi

# load config
# shellcheck source=/etc/sendTelegram.conf
. "$CONFIG_FILE"

# pesan dari argumen pertama atau env MESSAGE, default "hallow word"
if [ -n "$1" ]; then
  MESSAGE="$*"
else
  MESSAGE="${MESSAGE:not found text}"
fi

curl -s -X POST https://api.telegram.org/bot$TOKEN/sendMessage \
   -d chat_id=$CHAT_ID \
   -d text="$MESSAGE" > /dev/null
